// Generated by CoffeeScript 1.10.0
(function() {
  angular.module("perform").service("Portal", [
    "$q", "$http", "$rootScope", "$location", function($q, $http, $rootScope, $location) {
      var _listener, sendHTTPGetRequest, sendHTTPPostRequest;
      sendHTTPGetRequest = function(url) {
        return $http.get(url).then(function(response) {
          return response.data;
        });
      };
      sendHTTPPostRequest = function(url,auth) {
        return $http.post(url,auth).then(function(response) {
          return response.data;
        });
      };
      _listener = function(data) {
        var messageObj;
        messageObj = data;
        if (callbacks.hasOwnProperty(messageObj.callback_id)) {
          $rootScope.$apply(callbacks[messageObj.callback_id].cb.resolve(messageObj.data));
          delete callbacks[messageObj.callbackID];
        }
      };
      this.performWSAPI = $location.protocol() + "://" + $location.host() + ":" + $location.port();

      this.getUserInfo = function(uid) {
        var url;
        url = this.performWSAPI + "/get_user/" + uid;
        return sendHTTPGetRequest(url).then(function(response) {
          return response;
        });
      };
      this.getAllUsersByLocation = function(location) {
        var url;
        location = encodeURI(location);
        url = this.performWSAPI + "/get_active_location_users/" + location;
        return sendHTTPGetRequest(url);
      };
      this.getAllUsers = function(query) {
        var url;
        url = this.performWSAPI + "/get_all_users";
        return sendHTTPGetRequest(url);
      };
      this.getEmpID = function(userid) {
        var url;
        userID = encodeURI(userid);
        url = this.performWSAPI + "/avatar/" + userID;
        return sendHTTPGetRequest(url);
      };
      this.loginCheckThroughHttp = function(auth) {
        var url;
        url = this.performWSAPI + "/login";
        return sendHTTPPostRequest(url,auth);
      };
    }
  ]);

}).call(this);
