// Generated by CoffeeScript 1.10.0
(function() {
  angular.module("perform").controller("MultiUserReviewCtrl", [
    "$scope", "$rootScope", "$stateParams", "Reviews", "WS", "BG", "Utils", "Portal", "users", "$state", "$timeout", "Cache", "Reviews", "reviews", function($scope, $rootScope, $stateParams, Reviews, WS, BG, Utils, Portal, users, $state, $timeout, $interval, Cache, reviews) {
      var ref;
      $scope.review_year = $stateParams.review_year;
      $scope.template_id = reviews[0].latest_review.template_id;
      $scope.review_type = $state.current.data.review_type;
      $scope.getSaveStatus = function() {
        return Reviews.save;
      };
      $scope.$watch('getSaveStatus()', function(newValue, oldValue) {
        if (newValue) {
          if (newValue[$scope.review_type].status === 'Saving ..' || newValue[$scope.review_type].status === 'Editing ..' || newValue[$scope.review_type].status === 'Updating ..') {
            $scope.save.status = newValue[$scope.review_type].status;
          } else {
            $scope.save.status = 'All changes saved';
          }
          $scope.save.freq = newValue.freq;
          return $scope.save.last = newValue[$scope.review_type].last;
        }
      }, true);
      if ((ref = $state.$current.data) != null ? ref.section : void 0) {
        $scope.sectionName = $state.$current.data.section;
      } else {
        $scope.sectionName = $stateParams.section;
      }
    }
  ]);

}).call(this);
