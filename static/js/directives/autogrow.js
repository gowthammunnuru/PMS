// Generated by CoffeeScript 1.8.0
"use strict";
angular.module("perform").directive("autogrow", [
  function() {
    return {
      priority: 0,
      require: '?ngModel',
      link: function(scope, element, attrs, ngModel) {
        var shadow;
        shadow = angular.element('<p></p>').css({
          position: 'absolute',
          top: -1000000,
          left: -1000000,
          'font-family': element.css('font-family'),
          'font-weight': element.css('font-weight'),
          'font-size': element.css('font-size')
        });
        angular.element(document.body).append(shadow);
        scope.$watch(function() {
          return ngModel.$modelValue;
        }, function(newValue) {
          return scope.setWidth(newValue);
        });
        scope.setWidth = function(string) {
          var width;
          if (!string) {
            string = "Description";
          }
          shadow.text(string);
          width = shadow[0].offsetWidth;
          return element.css({
            width: "" + (width + 20) + "px"
          });
        };
        element.bind('keydown', (function(_this) {
          return function() {
            return scope.setWidth(element.val());
          };
        })(this));
      }
    };
  }
]);
